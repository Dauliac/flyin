skip_output:
  - meta
  - success
commit-msg:
  parallel: true
  commands:
    commitlint:
      skip:
        - merge
        - rebase
      tags: check lint commit
      run: cat "{1}" | convco check --from-stdin
    typos:
      skip:
        - merge
        - rebase
      tags: check commit typos
      run: cat "{1}" | head -n 1 | typos -
pre-commit:
  parallel: true
  commands:
    formatter:
      tags: formatter
      run: nix fmt
      stage_fixed: true
    code:npm-deps-hash:
      tags: code
      run: prefetch-npm-deps package-lock.json > ./nix/npm-deps-hash.txt
      glob: "package-lock.json"
      stage_fixed: true
    build:
      tags: build
      run: nix build --no-link
    build:storybook:
      tags: build
      run: nix build '.#storybook' --no-link
    checks:
      tags: build
      run: nix flake check
